#!/usr/bin/env node

var env = process.env.NODE_ENV || "development";
var config = require(__dirname + '/../config/config.json')[env];
var debug = require('debug')('cupireservas');
var express = require('express');
var app = require('../app');
var https = require('https');
var http = require('http');
var fs = require('fs');
var path = require('path');
var Promise = require('bluebird');
var httpPort = process.env.PORT || 8000;

var privateKey;
var certificate;

console.log("HEROKU!!!!")


/*if (env === "production") {
	privateKey = fs.readFileSync('/etc/pki/tls/private/virtual/myserver.key');
	certificate = fs.readFileSync('/etc/pki/tls/certs/virtual/STAR_virtual_uniandes_edu_co.crt');
} else {
	privateKey = fs.readFileSync(path.join("config", "sslcert", "server.key"));
	certificate = fs.readFileSync(path.join("config", "sslcert", "server.crt"));
}
var credentials = {
	key: privateKey,
	cert: certificate
};*/


	// Se crea una app de express para redireccionar el tr√°fico http a https.
	var httpServer;
		httpServer = http.createServer(app); //https.createServer(credentials, app);
		httpServer.listen(httpPort, function() {
			console.log("http server listen on", httpPort, "port");
		});
